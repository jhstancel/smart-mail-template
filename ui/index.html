<!doctype html>
<html lang="en" data-theme="light-minimal">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Smart Mail</title>
  <link rel="stylesheet" href="./styles.css"/>
</head>
<body>
  <!-- Settings Gear (upper-right) -->
  <div class="settings" id="settings">
    <button id="settingsBtn" class="settings-btn" aria-haspopup="true" aria-expanded="false" aria-controls="settingsMenu" title="Settings">
      <!-- Gear Icon -->
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Z" stroke="currentColor" stroke-width="1.8"/>
        <path d="M19.4 13.1a7.52 7.52 0 0 0 .05-2.21l2.06-1.6-2-3.46-2.49 .57a7.52 7.52 0 0 0-1.92-1.11l-.5-2.53H9.39l-.5 2.53a7.52 7.52 0 0 0-1.92 1.1l-2.49-.56-2 3.46 2.06 1.6a7.52 7.52 0 0 0 0 2.22l-2.06 1.6 2 3.46 2.49-.57c.6 .47 1.24 .85 1.93 1.12l.5 2.53h4.31l.5-2.53c.68-.27 1.33-.65 1.92-1.12l2.49.57 2-3.46-2.06-1.6Z" stroke="currentColor" stroke-width="1.4"/>
      </svg>
      <div id="splashTip" class="splash-tip" role="status" aria-live="polite"></div>
    </button>
    <div id="settingsMenu" class="settings-menu panel" role="menu" aria-label="Settings">
      <!-- Item: Theme -->
      <div class="settings-item" data-item="theme" role="menuitem" tabindex="0">
        <div>
          <div class="label">Theme</div>
          <div class="hint">Light Minimal, Dark Minimal, Cosmic, Dusk, Forest</div>
        </div>
        <svg class="chev" viewBox="0 0 24 24"><path fill="currentColor" d="M9 6l6 6-6 6"/></svg>
      </div>
      <div id="subTheme" class="settings-subpanel">
        <div class="settings-row">
          <label for="themeSelect" class="muted" style="min-width:90px">Preset</label>
          <select id="themeSelect" aria-label="Theme">
            <option value="light-minimal">Light Minimal (Default)</option>
            <option value="dark-minimal">Dark Minimal</option>
            <option value="cosmic">Cosmic</option>
            <option value="dusk-gradient">Dusk Gradient</option>
            <option value="forest-mist">Forest Mist</option>
          </select>
        </div>
      </div>

      <!-- Item: Typing Animation -->
      <div class="settings-item" data-item="typing" role="menuitem" tabindex="0">
        <div>
          <div class="label">Compose Animation</div>
          <div class="hint">Enable or disable live typing effect</div>
        </div>
        <svg class="chev" viewBox="0 0 24 24"><path fill="currentColor" d="M9 6l6 6-6 6"/></svg>
      </div>
      <div id="subTyping" class="settings-subpanel">
        <label class="toggle" for="liveCompose" style="margin-top:2px">
          <input id="liveCompose" type="checkbox" checked /> Compose Live
        </label>
        <p class="muted" style="margin:6px 0 0">Note: Minimal themes dampen most animations.</p>
      </div>
    </div>
  </div>

  <!-- Cosmic visuals -->
  <canvas id="stars"></canvas>
  <div class="glow-veil"></div>

  <!-- Corruption helpers -->
  <div id="corruptOverlay" class="corrupt-overlay" aria-hidden="true"></div>
  <div id="flash" class="flash" aria-hidden="true"></div>
  <div id="buffer" class="buffer" role="dialog" aria-modal="true" aria-label="Buffering">
    <div class="buffer-card">
      <div style="font-weight:800; margin-bottom:8px">Reinitializing displayâ€¦</div>
      <div class="bar" aria-hidden="true"><i id="barFill"></i></div>
      <div id="barPct" class="muted" style="margin-top:8px">0%</div>
    </div>
  </div>
  <div id="printMask" class="print-mask" aria-hidden="true"></div>
  <div id="printLine" class="print-line" aria-hidden="true"></div>

  <div class="wrap" id="appWrap">
    <!-- Header -->
    <div class="panel reveal">
      <h1 class="title">Smart Mail</h1>
      <div class="subtitle">Pick an intent. Or use Auto Detect.</div>

      <!-- Intent grid -->
      <div id="intentGrid" class="intent-grid"></div>

      <!-- Auto-detect stage -->
      <div id="autoStage" class="stage hidden">
        <div class="hr"></div>
        <div class="row">
          <div>
            <label for="to">To (Recipient)</label>
            <input id="to" type="email" placeholder="buyer@vendor.com" />
          </div>
          <div>
            <label for="subject">Subject (Draft)</label>
            <input id="subject" type="text" placeholder="RFQ PN-4812" />
          </div>
        </div>
        <div>
          <label for="hint">Body Hint (One or Two Lines)</label>
          <textarea id="hint" placeholder="Requesting pricing and lead time for PN-4812 quantity five"></textarea>
        </div>
        <div class="inline" style="margin:10px 0 6px">
          <button id="btnPredict" class="btn">Auto Detect Intent</button>
          <span id="predStatus" class="muted"></span>
        </div>
        <div id="predInfo" class="inline" style="display:none;margin-top:6px">
          <span class="pill">Predicted: <b id="predIntent"></b></span>
          <span id="predBadge" class="pill"></span>
          <span id="predMsg" class="muted"></span>
        </div>
        <div id="topK" class="inline" style="gap:6px; flex-wrap:wrap; margin:8px 0 4px"></div>
      </div>
    </div>

    <!-- Fields -->
    <div class="panel reveal" style="margin-top:16px">
      <div class="inline">
        <h2 class="title" style="font-size:18px; margin:0">Fields</h2>
        <span class="subtitle" id="fieldsHint">(Select An Option Or Use Auto Detect)</span>
        <span id="health" class="muted" style="margin-left:auto"></span>
      </div>
      <div id="fields" class="kvs"></div>
      <div class="inline" style="margin:8px 0">
        <button id="btnGenerate" class="btn">Generate</button>
        <span id="missing" class="muted"></span>
      </div>
    </div>

    <!-- Output -->
    <div class="panel reveal" style="margin-top:16px">
      <div class="inline">
        <h2 class="title" style="font-size:18px; margin:0">Output</h2>
        <span class="subtitle">Copy into your email client</span>
      </div>
      <div class="row">
        <div>
          <label>Subject</label>
          <div id="outSubject" class="out"></div>
          <div class="inline" style="margin-top:8px">
            <button id="copySubject" class="btn secondary">Copy Subject</button>
          </div>
        </div>
        <div>
          <label>Body</label>
          <div id="outBody" class="out"></div>
          <div class="inline" style="margin-top:8px">
            <button id="copyBody" class="btn secondary">Copy Body</button>
            <button id="btnClear" class="btn secondary">Clear</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="./app.js"></script>
</body>
</html>

